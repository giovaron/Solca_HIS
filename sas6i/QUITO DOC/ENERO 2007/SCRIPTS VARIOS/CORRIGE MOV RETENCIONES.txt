DECLARE
CURSOR cRet(nTipo NUMBER) IS
SELECT RET.ROWID,RET.*
FROM RETENCIONES RET
WHERE TPORTNEMP_TPORTN_CODIGO=nTipo
ORDER BY CMP_FECHA,CMP_CLAVE;
nNum NUMBER:=1;
BEGIN
  nNum:=1;
  FOR rRet in CRet(102) LOOP
    UPDATE RETENCIONES
    SET NUMERO=nNum
    WHERE ROWID=rRet.ROWID;
    nNum:=nNum+1;
  END LOOP;
  nNum:=1;
  FOR rRet in CRet(111) LOOP
    UPDATE RETENCIONES
    SET NUMERO=nNum
    WHERE ROWID=rRet.ROWID;
    nNum:=nNum+1;
  END LOOP;
END;
/
