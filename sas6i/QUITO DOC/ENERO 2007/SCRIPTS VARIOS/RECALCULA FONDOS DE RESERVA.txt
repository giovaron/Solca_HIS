CURSOR ccorrige IS
SELECT EMPROL_CODIGO,VALOR,debe
FROM MOVIMIENTOS_ROLES MVMROL 
WHERE ( MVMROL.ROLPGS_EMP_CODIGO = 'CSI' 
AND MVMROL.ROLPGS_NUMERO = 21
AND MVMROL.ESTADO <> 'A' ) and 
(MVMROL.EMPROL_EMP_CODIGO='CSI') and 
--(MVMROL.EMPROL_CODIGO=21) and 
(MVMROL.PRMROL_CODIGO='P0043')  AND VALOR>0
order by PRMROL_CODIGO;
BEGIN
  FOR rCorrige in cCorrige LOOP
    UPDATE Movimientos_roles
    set valor=rCorrige.valor,debe=rCorrige.debe
    where PRMROL_CODIGO IN ('P0043','P0041') AND ROLPGS_NUMERO=18 AND VALOR>0
  END LOOP;
END;
/

